{% extends 'store/base.html' %}
{% load static %}

{% block title %}Pending Products - Gujarat Crafts{% endblock %}

{% block content %}
<div class="container">
    <div class="admin-header">
        <h1>Pending Products Approval</h1>
        <a href="{% url 'home' %}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Back to Home
        </a>
    </div>

    <div class="products-table">
        {% if pending_products %}
            <table>
                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Product Name</th>
                        <th>Seller</th>
                        <th>Category</th>
                        <th>Price</th>
                        <th>Quantity</th>
                        <th>Created</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for product in pending_products %}
                        <tr>
                            <td>
                                {% if product.images.first %}
                                    <img src="{{ product.images.first.image.url }}" alt="{{ product.name }}" class="table-image">
                                {% else %}
                                    <img src="https://via.placeholder.com/50x50?text=No+Image" alt="{{ product.name }}" class="table-image">
                                {% endif %}
                            </td>
                            <td>
                                <strong>{{ product.name }}</strong>
                                <br>
                                <small style="color: #666;">{{ product.description|truncatewords:10 }}</small>
                            </td>
                            <td>{{ product.seller.username }}</td>
                            <td>{{ product.category.name|default:"No Category" }}</td>
                            <td>â‚¹{{ product.price }}</td>
                            <td>{{ product.quantity }}</td>
                            <td>{{ product.created_at|date:"M d, Y" }}</td>
                            <td>
                                <div style="display: flex; gap: 10px;">
                                    <a href="{% url 'approve_product' product.id %}" class="btn btn-sm btn-success" onclick="return confirm('Approve this product?')">
                                        <i class="fas fa-check"></i> Approve
                                    </a>
                                    <a href="{% url 'reject_product' product.id %}" class="btn btn-sm btn-danger" onclick="return confirm('Reject this product?')">
                                        <i class="fas fa-times"></i> Reject
                                    </a>
                                    <a href="{% url 'product_detail' product.id %}" class="btn btn-sm btn-info" target="_blank">
                                        <i class="fas fa-eye"></i> View
                                    </a>
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p class="no-products">No pending products at the moment. All products have been reviewed.</p>
        {% endif %}
    </div>
</div>

<style>
    .table-image {
        width: 50px;
        height: 50px;
        object-fit: cover;
        border-radius: 4px;
    }
    
    .btn-sm {
        padding: 5px 10px;
        font-size: 12px;
    }
    
    .btn-success {
        background-color: #28a745;
        color: white;
    }
    
    .btn-success:hover {
        background-color: #218838;
    }
    
    .btn-danger {
        background-color: #dc3545;
        color: white;
    }
    
    .btn-danger:hover {
        background-color: #c82333;
    }
    
    .btn-info {
        background-color: #17a2b8;
        color: white;
    }
    
    .btn-info:hover {
        background-color: #138496;
    }
</style>
{% endblock %}

